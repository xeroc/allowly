<!DOCTYPE html><!--7PwqU0UHtc19JvAFkESE5--><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/d0d0b4cef903c133.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-965c07b068eecb24.js"/><script src="/_next/static/chunks/699e18dd-ed71fb2a04e811bf.js" async=""></script><script src="/_next/static/chunks/984-55762e57990eea18.js" async=""></script><script src="/_next/static/chunks/main-app-fcaf1fa77ef70f17.js" async=""></script><script src="/_next/static/chunks/e8979000-6f67640ba7c52e55.js" async=""></script><script src="/_next/static/chunks/819-5ca4f0c952b26cc2.js" async=""></script><script src="/_next/static/chunks/859-13c35d2bc51c08bf.js" async=""></script><script src="/_next/static/chunks/973-bc29ef3a7e5acbc2.js" async=""></script><script src="/_next/static/chunks/app/layout-1169a5c4ffb37414.js" async=""></script><script src="/_next/static/chunks/522d4f41-12549511b0e3335c.js" async=""></script><script src="/_next/static/chunks/fe3fafec-9cfa794cae48736c.js" async=""></script><script src="/_next/static/chunks/67-ebd51ca46df8dc38.js" async=""></script><script src="/_next/static/chunks/322-f78ba1aea791da64.js" async=""></script><script src="/_next/static/chunks/770-4d5fc768eb25254b.js" async=""></script><script src="/_next/static/chunks/850-818bd3525f4465db.js" async=""></script><script src="/_next/static/chunks/321-bbf7079f9105eb07.js" async=""></script><script src="/_next/static/chunks/app/agent/page-a1bdc4a1a960a024.js" async=""></script><link rel="preload" href="https://p.chainsquad.com/js/script.js" as="script"/><title>Allowly - Pocket Money the Web3 Way</title><meta name="description" content="Dead simple recurring allowances using Tributary. Parent wallet ‚Üí child wallet, automated. No infrastructure, no database, no jobs. Just a clean UI that creates Tributary policies and lets the protocol handle the rest."/><meta name="author" content="Allowly"/><link rel="manifest" href="/site.webmanifest"/><meta name="keywords" content="Allowly,pocket money,web3,Solana,Tributary,USDC,allowance,automated payments,recurring payments,crypto,blockchain,parent,child,wallet,subscription,DeFi"/><meta name="creator" content="Allowly"/><meta name="publisher" content="Allowly"/><meta name="robots" content="index, follow"/><meta name="googlebot" content="index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1"/><meta property="og:title" content="Allowly - Pocket Money the Web3 Way"/><meta property="og:description" content="Dead simple recurring allowances using Tributary. Parent wallet ‚Üí child wallet, automated."/><meta property="og:url" content="https://allowly.app"/><meta property="og:site_name" content="Allowly"/><meta property="og:locale" content="en_US"/><meta property="og:image" content="https://allowly.app/og-image.png"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="630"/><meta property="og:image:alt" content="Allowly - Web3 Pocket Money"/><meta property="og:type" content="website"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:creator" content="@allowly"/><meta name="twitter:title" content="Allowly - Pocket Money the Web3 Way"/><meta name="twitter:description" content="Dead simple recurring allowances using Tributary. Parent wallet ‚Üí child wallet, automated."/><meta name="twitter:image" content="https://allowly.app/og-image.png"/><link rel="shortcut icon" href="/favicon-16x16.png"/><link rel="icon" href="/favicon.ico"/><link rel="apple-touch-icon" href="/apple-touch-icon.png"/><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body class="antialiased"><div hidden=""><!--$--><!--/$--></div><div class="min-h-screen bg-primary-dark"><section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-primary-dark"><div class="absolute inset-0 bg-mesh"></div><div class="absolute top-1/4 left-1/4 w-96 h-96 bg-accent/5 rounded-full blur-3xl"></div><div class="absolute bottom-1/4 right-1/4 w-80 h-80 bg-accent/3 rounded-full blur-3xl"></div><div class="relative z-10 mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><div class="relative z-10 mx-auto max-w-3xl text-center" style="opacity:0;transform:translateY(30px)"><div class="mb-8" style="opacity:0;transform:translateY(20px)"><span class="inline-flex items-center gap-2 rounded-full glass px-4 py-1.5 text-sm font-medium text-accent-light border border-accent/20"><span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-accent opacity-75"></span><span class="relative inline-flex rounded-full h-2 w-2 bg-accent"></span></span>Now open to everyone</span></div><h1 class="mb-6 text-5xl sm:text-6xl lg:text-7xl font-display font-semibold tracking-tight text-white leading-tight" style="opacity:0;transform:translateY(20px)">Autonomous allowances.<!-- --> <br class="hidden sm:block"/><span class="bg-gradient-to-r from-[#9945FF] to-[#14F195] bg-clip-text text-transparent font-bold">For AI agents.</span></h1><p class="mb-10 text-lg sm:text-xl text-muted max-w-2xl mx-auto leading-relaxed" style="opacity:0;transform:translateY(20px)">Set up pay-as-you-go USDC allowances for AI agents. They claim funds on-demand within budget limits. Budget depletes, resets periodically.</p><div class="flex flex-col items-center justify-center gap-4 sm:flex-row mb-8" style="opacity:0;transform:translateY(20px)"><a href="/#get-started" class="inline-flex items-center justify-center gap-2 rounded-xl bg-accent px-8 py-4 text-base font-semibold text-white shadow-glow hover:bg-accent-hover transition-colors" tabindex="0" style="transform:none">Get Started<svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"></path></svg></a><a href="/#how-it-works" class="inline-flex items-center justify-center gap-2 rounded-xl glass px-8 py-4 text-base font-semibold text-white glass-hover" tabindex="0" style="transform:none">Learn how it works</a></div><div class="flex flex-wrap items-center justify-center gap-6 text-sm text-muted" style="opacity:0;transform:translateY(20px)"><span class="flex items-center gap-2"><svg class="w-5 h-5 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>Secure</span><span class="flex items-center gap-2"><svg class="w-5 h-5 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg>No custody</span><span class="flex items-center gap-2"><svg class="w-5 h-5 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>Quick setup</span></div></div></div><div class="absolute bottom-0 left-0 right-0 h-px bg-gradient-to-r from-transparent via-accent/20 to-transparent" style="opacity:0"></div></section><section class="py-24 bg-primary-dark" id="how-it-works"><div class="max-w-6xl mx-auto px-6"><div class="text-center mb-20" style="opacity:0;transform:translateY(30px)"><h2 class="text-4xl sm:text-5xl font-display font-semibold text-white mb-6" style="opacity:0;transform:translateY(20px)">How It Works</h2><p class="text-xl text-muted max-w-2xl mx-auto leading-relaxed" style="opacity:0;transform:translateY(20px)">Set up bounded allowances for AI agents. They claim funds autonomously within policy limits. On-chain state handles everything.</p></div><div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6"><div class="relative flex flex-col p-8 rounded-2xl glass" style="opacity:0;transform:translateY(30px)"><div class="relative z-10 flex flex-col h-full"><div class="flex items-center justify-between mb-6"><div class="flex items-center justify-center w-14 h-14 rounded-xl bg-accent/10 border border-accent/20 text-accent"><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><span class="text-4xl font-display font-semibold text-accent/20">01</span></div><h3 class="text-xl font-semibold text-white mb-3">Connect Wallet</h3><p class="text-muted leading-relaxed flex-grow">Human connects their Web3 wallet to securely authenticate with Allowly.</p><div class="hidden lg:block absolute top-1/2 -right-3 transform -translate-y-1/2 text-accent/30"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></div><div class="absolute inset-0 rounded-2xl bg-accent/0 group-hover:bg-accent/5 transition-colors duration-500"></div></div><div class="relative flex flex-col p-8 rounded-2xl glass" style="opacity:0;transform:translateY(30px)"><div class="relative z-10 flex flex-col h-full"><div class="flex items-center justify-between mb-6"><div class="flex items-center justify-center w-14 h-14 rounded-xl bg-accent/10 border border-accent/20 text-accent"><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><span class="text-4xl font-display font-semibold text-accent/20">02</span></div><h3 class="text-xl font-semibold text-white mb-3">Enter Agent&#x27;s Wallet</h3><p class="text-muted leading-relaxed flex-grow">Input the wallet address of the AI agent who will receive the allowance.</p><div class="hidden lg:block absolute top-1/2 -right-3 transform -translate-y-1/2 text-accent/30"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></div><div class="absolute inset-0 rounded-2xl bg-accent/0 group-hover:bg-accent/5 transition-colors duration-500"></div></div><div class="relative flex flex-col p-8 rounded-2xl glass" style="opacity:0;transform:translateY(30px)"><div class="relative z-10 flex flex-col h-full"><div class="flex items-center justify-between mb-6"><div class="flex items-center justify-center w-14 h-14 rounded-xl bg-accent/10 border border-accent/20 text-accent"><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><span class="text-4xl font-display font-semibold text-accent/20">03</span></div><h3 class="text-xl font-semibold text-white mb-3">Set Budget &amp; Limits</h3><p class="text-muted leading-relaxed flex-grow">Choose total budget, max per claim, and period length (e.g., $500 total, $50/claim, 30 days).</p><div class="hidden lg:block absolute top-1/2 -right-3 transform -translate-y-1/2 text-accent/30"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg></div></div><div class="absolute inset-0 rounded-2xl bg-accent/0 group-hover:bg-accent/5 transition-colors duration-500"></div></div><div class="relative flex flex-col p-8 rounded-2xl glass" style="opacity:0;transform:translateY(30px)"><div class="relative z-10 flex flex-col h-full"><div class="flex items-center justify-between mb-6"><div class="flex items-center justify-center w-14 h-14 rounded-xl bg-accent/10 border border-accent/20 text-accent"><svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><span class="text-4xl font-display font-semibold text-accent/20">04</span></div><h3 class="text-xl font-semibold text-white mb-3">Agent Claims On-Demand</h3><p class="text-muted leading-relaxed flex-grow">Agent autonomously claims funds when needed (up to max per claim). Budget depletes until period reset.</p></div><div class="absolute inset-0 rounded-2xl bg-accent/0 group-hover:bg-accent/5 transition-colors duration-500"></div></div></div></div></section><section class="py-24 px-4 bg-primary-dark" id="get-started"><div class="max-w-4xl mx-auto"><div class="text-center mb-16" style="opacity:0;transform:translateY(30px)"><h2 class="text-4xl sm:text-5xl font-display font-semibold text-white mb-6" style="opacity:0;transform:translateY(20px)">Configure Agent Allowance</h2><p class="text-xl text-muted max-w-2xl mx-auto leading-relaxed" style="opacity:0;transform:translateY(20px)">Set up pay-as-you-go USDC allowance for your AI agent. Agent autonomously claims funds on-demand within budget limits.<!-- -->Create automated allowance policies for your family members. Set amounts, frequencies, and let the blockchain handle the rest.</p></div><div class="max-w-md mx-auto" style="opacity:0;transform:translateY(30px)"><div class="relative"><div class="absolute inset-0 bg-accent/20 blur-3xl rounded-3xl"></div><div class="relative glass rounded-3xl p-8"><div style="opacity:0"><div class="text-center max-w-md mx-auto mt-4"><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div></div></div></div></div></div></section><section id="features" class="py-24 bg-primary-dark"><div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><div class="mx-auto max-w-2xl text-center mb-16" style="opacity:0;transform:translateY(30px)"><h2 class="text-4xl sm:text-5xl font-display font-semibold text-white mb-6" style="opacity:0;transform:translateY(20px)">Everything you need for automated allowances</h2><p class="text-xl text-muted max-w-2xl mx-auto leading-relaxed" style="opacity:0;transform:translateY(20px)">Simple, secure, and built for the web3 generation. Allowly makes it effortless to give your kids financial freedom.</p></div><div class="mx-auto mt-16 max-w-2xl sm:mt-20 lg:mt-24 lg:max-w-none"><dl class="grid max-w-xl grid-cols-1 gap-x-8 gap-y-12 lg:max-w-none lg:grid-cols-2 lg:gap-y-16"><div class="relative p-8 rounded-2xl glass" style="opacity:0;transform:translateY(40px)"><div><dt class="flex items-start gap-x-4 text-lg font-semibold leading-8 text-white"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-accent/10 border border-accent/20 text-accent flex-shrink-0"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9.143 17.082a24.248 24.248 0 003.844.148m-3.844-.148a23.856 23.856 0 01-5.455-1.31 8.964 8.964 0 002.3-5.542m3.155 6.852a3 3 0 005.667 1.97m1.965-2.277L21 21m-4.225-4.225a23.81 23.81 0 003.536-1.003A8.967 8.967 0 0118 9.75V9A6 6 0 006.53 6.53m10.245 10.245L6.53 6.53M3 3l3.53 3.53"></path></svg></div>Set &amp; Forget</dt><dd class="mt-4 text-base leading-7 text-muted">Automate recurring USDC allowances in seconds. Once set up, payments happen automatically on schedule ‚Äî no manual transfers, no reminders, no hassle.</dd></div></div><div class="relative p-8 rounded-2xl glass" style="opacity:0;transform:translateY(40px)"><div><dt class="flex items-start gap-x-4 text-lg font-semibold leading-8 text-white"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-accent/10 border border-accent/20 text-accent flex-shrink-0"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z"></path></svg></div>No Infrastructure</dt><dd class="mt-4 text-base leading-7 text-muted">Built on Tributary protocol ‚Äî no servers, no databases, no complex backend. Everything runs on-chain, giving you true decentralization and reliability.</dd></div></div><div class="relative p-8 rounded-2xl glass" style="opacity:0;transform:translateY(40px)"><div><dt class="flex items-start gap-x-4 text-lg font-semibold leading-8 text-white"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-accent/10 border border-accent/20 text-accent flex-shrink-0"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z"></path></svg></div>Parent Control</dt><dd class="mt-4 text-base leading-7 text-muted">You hold the keys ‚Äî literally. Pause, adjust, or cancel allowances anytime. Funds never leave your custody. Complete peace of mind.</dd></div></div><div class="relative p-8 rounded-2xl glass" style="opacity:0;transform:translateY(40px)"><div><dt class="flex items-start gap-x-4 text-lg font-semibold leading-8 text-white"><div class="flex h-12 w-12 items-center justify-center rounded-xl bg-accent/10 border border-accent/20 text-accent flex-shrink-0"><svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 00-2.25-2.25H15a3.5 3.5 0 11-7 0H5.25A2.25 2.25 0 003 12m18 0v6a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 9m18 0V6a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6v3"></path></svg></div>Wallet-Only Simplicity</dt><dd class="mt-4 text-base leading-7 text-muted">No accounts to create, no passwords to remember, no email required. Just connect your wallet and you&#x27;re ready to go. It doesn&#x27;t get simpler than this.</dd></div></div></dl></div></div></section><div class="max-w-4xl mx-auto py-16 px-4"><div class="bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-8"><h2 class="text-3xl font-bold text-white mb-4 flex items-center gap-3"><span class="text-4xl">ü§ñ</span>Download Agent Skill</h2><p class="text-gray-300 mb-6">Copy this self-contained OpenClow skill file to give your AI agent the ability to check allowance and manage budgets autonomously.</p><div class="bg-black/30 rounded-lg border border-white/10 p-4 mb-4"><div class="flex items-center justify-between mb-2"><span class="text-xs text-gray-400 font-mono">SKILL.md - Self-contained</span><button class="px-4 py-2 bg-accent hover:bg-accent/80 text-white rounded-lg text-sm font-medium transition-colors">Download File</button></div><div class="bg-black/50 rounded-lg p-4 max-h-96 overflow-y-auto overflow-x-auto text-sm prose prose-invert prose-sm max-w-none"><h1>Allowly Agent - Autonomous Pay-As-You-Go Allowances</h1>
<p><strong>Self-contained Skill for AI agents to check and manage Allowance budgets on Solana.</strong></p>
<hr/>
<h2>Overview</h2>
<p>Check allowance availability, view pay-as-you-go policy details, and execute payment claims. Humans
set up bounded allowance budgets, and you can check your available balance, view policy limits,
monitor claim history, and execute claims autonomously.</p>
<h2>Use When</h2>
<p>You need to:</p>
<ul>
<li>Check how much USDC allowance is available</li>
<li>View pay-as-you-go policy details set by your human</li>
<li>Monitor claim history</li>
<li>Decide when to claim funds within per-claim limits</li>
<li>Execute payment claims against your allowance policy</li>
</ul>
<h2>Quick Start</h2>
<pre><pre class="!mt-0 !mb-0 !bg-transparent !p-0"><code class="language-javascript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// Check your allowance status</span><span>
</span><span></span><span class="token" style="color:#569CD6">const</span><span> status </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">checkAllowance</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üí∞ Total Budget: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">status</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">totalBudget</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚úÖ Remaining: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">status</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">remaining</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚ö° Max per claim: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">status</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">maxPerClaim</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚è±Ô∏è Period: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">status</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">periodDays</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> days</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üîÑ Period resets: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">status</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">periodEnd</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span></code></pre></pre>
<hr/>
<h2>API Functions</h2>
<h3>checkAllowance(agentWallet)</h3>
<p>Check available allowance balance and policy details.</p>
<pre><pre class="!mt-0 !mb-0 !bg-transparent !p-0"><code class="language-javascript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token doc-comment" style="color:#6a9955">/**
</span><span class="token doc-comment" style="color:#6a9955"> * Check allowance status and policy details
</span><span class="token doc-comment" style="color:#6a9955"> *
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">string</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">agentWallet</span><span class="token doc-comment" style="color:#6a9955"> - Agent&#x27;s wallet public key (base58)
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@returns</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">Promise</span><span class="token doc-comment" style="color:#d4d4d4">&lt;</span><span class="token doc-comment" style="color:#4ec9b0">object</span><span class="token doc-comment" style="color:#d4d4d4">&gt;</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> Allowance status with budget, paid, remaining, limits
</span><span class="token doc-comment" style="color:#6a9955"> */</span><span>
</span><span></span><span class="token" style="color:#569CD6">async</span><span> </span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">checkAllowance</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// Validate inputs</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">!</span><span>agentWallet </span><span class="token" style="color:#d4d4d4">||</span><span> </span><span class="token" style="color:#569CD6">typeof</span><span> agentWallet </span><span class="token" style="color:#d4d4d4">!==</span><span> </span><span class="token" style="color:#ce9178">&quot;string&quot;</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Invalid agent wallet address&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Import Tributary SDK</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#4ec9b0">Tributary</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#c586c0">import</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;@tributary-so/sdk&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#4ec9b0">Connection</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#4ec9b0">PublicKey</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#4ec9b0">Wallet</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#c586c0">import</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;@solana/web3.js&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#9cdcfe">BN</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#c586c0">import</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;bn.js&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Initialize connection</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> connection </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Connection</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">commitment</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;confirmed&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#c586c0">try</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#6a9955">// 1. Fetch all payment policies where agent is recipient</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> tributary </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Tributary</span><span class="token" style="color:#d4d4d4">(</span><span>connection</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Wallet</span><span class="token" style="color:#d4d4d4">(</span><span>agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#569CD6">const</span><span> policies </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> tributary</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">getPaymentPoliciesByRecipient</span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>      </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">PublicKey</span><span class="token" style="color:#d4d4d4">(</span><span>agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// 2. Filter for active pay-as-you-go policies</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> paygPolicies </span><span class="token" style="color:#d4d4d4">=</span><span> policies
</span><span>      </span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">filter</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> </span><span class="token literal-property" style="color:#9cdcfe">account</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#9cdcfe"> policy </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>          policy</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">status</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">active</span><span> </span><span class="token" style="color:#d4d4d4">!==</span><span> </span><span class="token nil" style="color:#569CD6">undefined</span><span> </span><span class="token" style="color:#d4d4d4">&amp;&amp;</span><span> </span><span class="token" style="color:#6a9955">// Check if active</span><span>
</span><span>          </span><span class="token" style="color:#ce9178">&quot;payAsYouGo&quot;</span><span> </span><span class="token" style="color:#569CD6">in</span><span> policy</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">policyType</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">{</span><span class="token" style="color:#9cdcfe"> </span><span class="token literal-property" style="color:#9cdcfe">publicKey</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#9cdcfe"> policyPda</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> </span><span class="token literal-property" style="color:#9cdcfe">account</span><span class="token" style="color:#d4d4d4">:</span><span class="token" style="color:#9cdcfe"> policy </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> payg </span><span class="token" style="color:#d4d4d4">=</span><span> policy</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">policyType</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">payAsYouGo</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>        
<span>        </span><span class="token" style="color:#6a9955">// Convert from smallest units to human-readable (e.g., USDC has 6 decimals)</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> decimals </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">6</span><span class="token" style="color:#d4d4d4">;</span><span> </span><span class="token" style="color:#6a9955">// USDC standard</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> maxAmountPerPeriod </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Number</span><span class="token" style="color:#d4d4d4">(</span><span>payg</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">maxAmountPerPeriod</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">/</span><span> </span><span class="token" style="color:#b5cea8">10</span><span> </span><span class="token" style="color:#d4d4d4">**</span><span> decimals</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> maxChunkAmount </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Number</span><span class="token" style="color:#d4d4d4">(</span><span>payg</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">maxChunkAmount</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">/</span><span> </span><span class="token" style="color:#b5cea8">10</span><span> </span><span class="token" style="color:#d4d4d4">**</span><span> decimals</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> periodTotal </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Number</span><span class="token" style="color:#d4d4d4">(</span><span>payg</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">currentPeriodTotal</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">/</span><span> </span><span class="token" style="color:#b5cea8">10</span><span> </span><span class="token" style="color:#d4d4d4">**</span><span> decimals</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>        
<span>        </span><span class="token" style="color:#6a9955">// Calculate period end time</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> currentPeriodStart </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Number</span><span class="token" style="color:#d4d4d4">(</span><span>payg</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">currentPeriodStart</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#b5cea8">1000</span><span class="token" style="color:#d4d4d4">;</span><span> </span><span class="token" style="color:#6a9955">// Unix to ms</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> periodLengthMs </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Number</span><span class="token" style="color:#d4d4d4">(</span><span>payg</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">periodLengthSeconds</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#b5cea8">1000</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> periodEnd </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Date</span><span class="token" style="color:#d4d4d4">(</span><span>currentPeriodStart </span><span class="token" style="color:#d4d4d4">+</span><span> periodLengthMs</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>        
<span>        </span><span class="token" style="color:#6a9955">// Calculate remaining in period</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> remaining </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Math</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">max</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">,</span><span> maxAmountPerPeriod </span><span class="token" style="color:#d4d4d4">-</span><span> periodTotal</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>        
<span>        </span><span class="token" style="color:#6a9955">// Check if period has expired</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> now </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Date</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">now</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>        </span><span class="token" style="color:#569CD6">const</span><span> isPeriodActive </span><span class="token" style="color:#d4d4d4">=</span><span> now </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> currentPeriodStart </span><span class="token" style="color:#d4d4d4">&amp;&amp;</span><span> now </span><span class="token" style="color:#d4d4d4">&lt;</span><span> currentPeriodStart </span><span class="token" style="color:#d4d4d4">+</span><span> periodLengthMs</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>        </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">id</span><span class="token" style="color:#d4d4d4">:</span><span> policyPda</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">toString</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">totalBudget</span><span class="token" style="color:#d4d4d4">:</span><span> maxAmountPerPeriod</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">maxPerClaim</span><span class="token" style="color:#d4d4d4">:</span><span> maxChunkAmount</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">periodSeconds</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Number</span><span class="token" style="color:#d4d4d4">(</span><span>payg</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">periodLengthSeconds</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">periodStart</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Date</span><span class="token" style="color:#d4d4d4">(</span><span>currentPeriodStart</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">toISOString</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">periodEnd</span><span class="token" style="color:#d4d4d4">:</span><span> periodEnd</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">toISOString</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">currentPeriodTotal</span><span class="token" style="color:#d4d4d4">:</span><span> periodTotal</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">remaining</span><span class="token" style="color:#d4d4d4">:</span><span> isPeriodActive </span><span class="token" style="color:#d4d4d4">?</span><span> remaining </span><span class="token" style="color:#d4d4d4">:</span><span> maxAmountPerPeriod</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>          </span><span class="token literal-property" style="color:#9cdcfe">status</span><span class="token" style="color:#d4d4d4">:</span><span> policy</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">status</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">active</span><span> </span><span class="token" style="color:#d4d4d4">!==</span><span> </span><span class="token nil" style="color:#569CD6">undefined</span><span> </span><span class="token" style="color:#d4d4d4">?</span><span> </span><span class="token" style="color:#ce9178">&quot;active&quot;</span><span> </span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;paused&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>        </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// 3. Aggregate totals across all pay-as-you-go policies</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> totalBudget </span><span class="token" style="color:#d4d4d4">=</span><span> paygPolicies</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">reduce</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">sum</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> p</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> sum </span><span class="token" style="color:#d4d4d4">+</span><span> p</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">totalBudget</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> totalPaid </span><span class="token" style="color:#d4d4d4">=</span><span> paygPolicies</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">reduce</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">sum</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> p</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> sum </span><span class="token" style="color:#d4d4d4">+</span><span> p</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">currentPeriodTotal</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> remaining </span><span class="token" style="color:#d4d4d4">=</span><span> paygPolicies</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">reduce</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">sum</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> p</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> sum </span><span class="token" style="color:#d4d4d4">+</span><span> p</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">remaining</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> maxPerClaim </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Math</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">max</span><span class="token" style="color:#d4d4d4">(</span><span class="token spread" style="color:#d4d4d4">...</span><span>paygPolicies</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">p</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> p</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">maxPerClaim</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> periodSeconds </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Math</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">max</span><span class="token" style="color:#d4d4d4">(</span><span class="token spread" style="color:#d4d4d4">...</span><span>paygPolicies</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">map</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">p</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> p</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">periodSeconds</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#c586c0">return</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      totalBudget</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      totalPaid</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      remaining</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      maxPerClaim</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      periodSeconds</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9cdcfe">periodDays</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token known-class-name" style="color:#4ec9b0">Math</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">round</span><span class="token" style="color:#d4d4d4">(</span><span>periodSeconds </span><span class="token" style="color:#d4d4d4">/</span><span> </span><span class="token" style="color:#b5cea8">86400</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#6a9955">// Convert to days</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9cdcfe">periodEnd</span><span class="token" style="color:#d4d4d4">:</span><span> paygPolicies</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">length</span><span> </span><span class="token" style="color:#d4d4d4">&gt;</span><span> </span><span class="token" style="color:#b5cea8">0</span><span> </span><span class="token" style="color:#d4d4d4">?</span><span> paygPolicies</span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">periodEnd</span><span> </span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token null nil" style="color:#569CD6">null</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token literal-property" style="color:#9cdcfe">policies</span><span class="token" style="color:#d4d4d4">:</span><span> paygPolicies</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">catch</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>error</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Error checking allowance:&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> error</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">message</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Failed to check allowance: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">error</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">message</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span></span><span class="token doc-comment" style="color:#6a9955">/**
</span><span class="token doc-comment" style="color:#6a9955"> * Execute a payment claim against a pay-as-you-go policy
</span><span class="token doc-comment" style="color:#6a9955"> *
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">string</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">agentWallet</span><span class="token doc-comment" style="color:#6a9955"> - Agent&#x27;s wallet private key array of numbers
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">PublicKey</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">policyPda</span><span class="token doc-comment" style="color:#6a9955"> - Payment policy PDA address (base58 string or PublicKey)
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">number</span><span class="token doc-comment" style="color:#d4d4d4">|</span><span class="token doc-comment" style="color:#4ec9b0">BN</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">claimAmount</span><span class="token doc-comment" style="color:#6a9955"> - Amount to claim in smallest token units (e.g., 10000000 for 10 USDC)
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">string</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">recipient</span><span class="token doc-comment" style="color:#6a9955"> - Recipient public key (base58 string)
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">string</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">tokenMint</span><span class="token doc-comment" style="color:#6a9955"> - Token mint address (base58 string)
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@param</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">string</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#9cdcfe">gateway</span><span class="token doc-comment" style="color:#6a9955"> - Gateway public key (base58 string)
</span><span class="token doc-comment" style="color:#6a9955"> * </span><span class="token doc-comment" style="color:#569CD6">@returns</span><span class="token doc-comment" style="color:#6a9955"> </span><span class="token doc-comment" style="color:#d4d4d4">{</span><span class="token doc-comment" style="color:#4ec9b0">Promise</span><span class="token doc-comment" style="color:#d4d4d4">&lt;</span><span class="token doc-comment" style="color:#4ec9b0">string</span><span class="token doc-comment" style="color:#d4d4d4">&gt;</span><span class="token doc-comment" style="color:#d4d4d4">}</span><span class="token doc-comment" style="color:#6a9955"> Transaction signature
</span><span class="token doc-comment" style="color:#6a9955"> */</span><span>
</span><span></span><span class="token" style="color:#569CD6">async</span><span> </span><span class="token" style="color:#569CD6">function</span><span> </span><span class="token" style="color:#dcdcaa">executeClaim</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">agentWallet</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> policyPda</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> claimAmount</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> recipient</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> tokenMint</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> gateway</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// Validate inputs</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">!</span><span>agentWallet </span><span class="token" style="color:#d4d4d4">||</span><span> </span><span class="token" style="color:#d4d4d4">!</span><span class="token known-class-name" style="color:#4ec9b0">Array</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">isArray</span><span class="token" style="color:#d4d4d4">(</span><span>agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Invalid agent wallet keypair array&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">!</span><span>policyPda</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Policy PDA address is required&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">!</span><span>claimAmount </span><span class="token" style="color:#d4d4d4">||</span><span> claimAmount </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Claim amount must be greater than 0&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Import Tributary SDK</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#4ec9b0">Tributary</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#c586c0">import</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;@tributary-so/sdk&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token" style="color:#4ec9b0">Connection</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#4ec9b0">PublicKey</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#4ec9b0">Keypair</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#c586c0">import</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;@solana/web3.js&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> </span><span class="token" style="color:#9cdcfe">BN</span><span> </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#c586c0">import</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;bn.js&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Initialize connection</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> connection </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Connection</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;https://api.mainnet-beta.solana.com&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token literal-property" style="color:#9cdcfe">commitment</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;confirmed&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Create Keypair from private key array</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> keypair </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#4ec9b0">Keypair</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">fromSecretKey</span><span class="token" style="color:#d4d4d4">(</span><span class="token known-class-name" style="color:#4ec9b0">Uint8Array</span><span class="token" style="color:#d4d4d4">(</span><span>agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Create Tributary SDK instance</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> tributary </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Tributary</span><span class="token" style="color:#d4d4d4">(</span><span>connection</span><span class="token" style="color:#d4d4d4">,</span><span> keypair</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Convert parameters to PublicKey if needed</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> policyPdaPubkey </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">typeof</span><span> policyPda </span><span class="token" style="color:#d4d4d4">===</span><span> </span><span class="token" style="color:#ce9178">&#x27;string&#x27;</span><span> 
</span><span>    </span><span class="token" style="color:#d4d4d4">?</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">PublicKey</span><span class="token" style="color:#d4d4d4">(</span><span>policyPda</span><span class="token" style="color:#d4d4d4">)</span><span> 
</span><span>    </span><span class="token" style="color:#d4d4d4">:</span><span> policyPda</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> recipientPubkey </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">PublicKey</span><span class="token" style="color:#d4d4d4">(</span><span>recipient</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> tokenMintPubkey </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">PublicKey</span><span class="token" style="color:#d4d4d4">(</span><span>tokenMint</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> gatewayPubkey </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">PublicKey</span><span class="token" style="color:#d4d4d4">(</span><span>gateway</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Convert claim amount to BN if needed</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> amountBN </span><span class="token" style="color:#d4d4d4">=</span><span> claimAmount </span><span class="token" style="color:#569CD6">instanceof</span><span> </span><span class="token" style="color:#4ec9b0">BN</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#4ec9b0">BN</span><span> </span><span class="token" style="color:#d4d4d4">?</span><span> claimAmount </span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">BN</span><span class="token" style="color:#d4d4d4">.</span><span class="token" style="color:#4ec9b0">BN</span><span class="token" style="color:#d4d4d4">(</span><span>claimAmount</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#c586c0">try</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#6a9955">// Execute payment using Tributary SDK</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> instructions </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> tributary</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">executePayment</span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>      policyPdaPubkey</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      amountBN</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      recipientPubkey</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      tokenMintPubkey</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      gatewayPubkey</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      keypair</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">publicKey</span><span> </span><span class="token" style="color:#6a9955">// user parameter (caller&#x27;s wallet)</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// Create and send transaction</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> transaction </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Transaction</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">add</span><span class="token" style="color:#d4d4d4">(</span><span class="token spread" style="color:#d4d4d4">...</span><span>instructions</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// Sign and send transaction</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> signature </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> connection</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">sendTransaction</span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>      transaction</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">[</span><span>keypair</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>        </span><span class="token literal-property" style="color:#9cdcfe">commitment</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;confirmed&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// Wait for confirmation</span><span>
</span><span>    </span><span class="token" style="color:#569CD6">const</span><span> confirmation </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> connection</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">confirmTransaction</span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>      signature</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>      </span><span class="token" style="color:#ce9178">&quot;confirmed&quot;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>confirmation</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">value</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">err</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Transaction failed: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string known-class-name" style="color:#4ec9b0">JSON</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string method property-access" style="color:#dcdcaa">stringify</span><span class="token template-string" style="color:#d4d4d4">(</span><span class="token template-string" style="color:#9cdcfe">confirmation</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">value</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">err</span><span class="token template-string" style="color:#d4d4d4">)</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>    </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚úÖ Payment claim successful: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">signature</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üí∞ Amount claimed: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">claimAmount</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#c586c0">return</span><span> signature</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">catch</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>error</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;‚ùå Payment claim failed:&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> error</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>    </span><span class="token" style="color:#6a9955">// Handle common errors</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>error</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">message</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">includes</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;insufficient&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Insufficient token balance for this claim&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">else</span><span> </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>error</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">message</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">includes</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;exceeded&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Claim amount exceeds max per claim limit&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">else</span><span> </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>error</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">message</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">includes</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;period&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;Payment period has not started or has ended&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">else</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>      </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Failed to execute claim: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">error</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">message</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></pre>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>agentWallet</code>: Agent&#x27;s wallet private key as array of numbers</li>
<li><code>policyPda</code>: Payment policy PDA address (base58 string or PublicKey object)</li>
<li><code>claimAmount</code>: Amount to claim in smallest token units (e.g., 10000000 for 10 USDC)</li>
<li><code>recipient</code>: Recipient public key (base58 string)</li>
<li><code>tokenMint</code>: Token mint address (base58 string)</li>
<li><code>gateway</code>: Gateway public key (base58 string)</li>
</ul>
<p><strong>Returns:</strong></p>
<ul>
<li>Transaction signature (base58 string)</li>
</ul>
<p><strong>Example:</strong></p>
<pre><pre class="!mt-0 !mb-0 !bg-transparent !p-0"><code class="language-javascript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// Execute a claim</span><span>
</span><span></span><span class="token" style="color:#569CD6">const</span><span> signature </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">executeClaim</span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">3</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token spread" style="color:#d4d4d4">...</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">64</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>                              </span><span class="token" style="color:#6a9955">// agent wallet private key array</span><span>
</span><span>  policy</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">id</span><span class="token" style="color:#d4d4d4">,</span><span>                                       </span><span class="token" style="color:#6a9955">// policy PDA address</span><span>
</span><span>  claimAmount </span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#b5cea8">1000000</span><span class="token" style="color:#d4d4d4">,</span><span>                           </span><span class="token" style="color:#6a9955">// convert to smallest units (6 decimals)</span><span>
</span><span>  </span><span class="token" style="color:#ce9178">&quot;RECIPIENT_PUBLIC_KEY_HERE&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>                     </span><span class="token" style="color:#6a9955">// where to send funds</span><span>
</span><span>  </span><span class="token" style="color:#ce9178">&quot;EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>  </span><span class="token" style="color:#6a9955">// USDC mint</span><span>
</span><span>  </span><span class="token" style="color:#ce9178">&quot;CwNybLVQ3sVmcZ3Q1veS6x99gUZcAF2duNDe3qbcEMGr&quot;</span><span>   </span><span class="token" style="color:#6a9955">// gateway</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">Claim signature: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">signature</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span></code></pre></pre>
<hr/>
<h2>Usage Examples</h2>
<h3>Example 1: Check Allowance Before Task</h3>
<pre><pre class="!mt-0 !mb-0 !bg-transparent !p-0"><code class="language-javascript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// Task that requires payment</span><span>
</span><span></span><span class="token" style="color:#569CD6">const</span><span> task </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9cdcfe">requiresPayment</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#569cd6">true</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9cdcfe">cost</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">10</span><span class="token" style="color:#d4d4d4">,</span><span>  </span><span class="token" style="color:#6a9955">// USDC</span><span>
</span><span>  </span><span class="token literal-property" style="color:#9cdcfe">description</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;OpenAI GPT-4&quot;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// Check allowance first</span><span>
</span><span></span><span class="token" style="color:#569CD6">const</span><span> allowance </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">checkAllowance</span><span class="token" style="color:#d4d4d4">(</span><span>agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>allowance</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">remaining</span><span> </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> task</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">cost</span><span> </span><span class="token" style="color:#d4d4d4">&amp;&amp;</span><span> task</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">cost</span><span> </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> allowance</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">maxPerClaim</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚úÖ Sufficient allowance: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">remaining</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚úÖ Within per-claim limit: max </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">maxPerClaim</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚è±Ô∏è Period resets in: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">periodEnd</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">executeTask</span><span class="token" style="color:#d4d4d4">(</span><span>task</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">else</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚ùå Insufficient allowance. Have </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">remaining</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178">, need </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">task</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">cost</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></pre>
<h3>Example 2: Smart Claim Sizing</h3>
<pre><pre class="!mt-0 !mb-0 !bg-transparent !p-0"><code class="language-javascript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#569CD6">const</span><span> tasks </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#d4d4d4">[</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token literal-property" style="color:#9cdcfe">name</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;Send email&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token literal-property" style="color:#9cdcfe">cost</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">0.50</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token literal-property" style="color:#9cdcfe">name</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;API call 1&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token literal-property" style="color:#9cdcfe">cost</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">2.00</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">{</span><span> </span><span class="token literal-property" style="color:#9cdcfe">name</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#ce9178">&quot;API call 2&quot;</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token literal-property" style="color:#9cdcfe">cost</span><span class="token" style="color:#d4d4d4">:</span><span> </span><span class="token" style="color:#b5cea8">3.00</span><span> </span><span class="token" style="color:#d4d4d4">}</span><span class="token" style="color:#d4d4d4">,</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#569CD6">const</span><span> allowance </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">checkAllowance</span><span class="token" style="color:#d4d4d4">(</span><span>agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#569CD6">const</span><span> totalCost </span><span class="token" style="color:#d4d4d4">=</span><span> tasks</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">reduce</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">sum</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#9cdcfe"> t</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> sum </span><span class="token" style="color:#d4d4d4">+</span><span> t</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">cost</span><span class="token" style="color:#d4d4d4">,</span><span> </span><span class="token" style="color:#b5cea8">0</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span></span><span class="token" style="color:#6a9955">// Batch claim if within per-claim and total remaining limits</span><span>
</span><span></span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>totalCost </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> allowance</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">maxPerClaim</span><span> </span><span class="token" style="color:#d4d4d4">&amp;&amp;</span><span> totalCost </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> allowance</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">remaining</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚úÖ Batch claim: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">totalCost</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> USDC</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚è±Ô∏è Period: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">periodDays</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> days</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">executeAllTasks</span><span class="token" style="color:#d4d4d4">(</span><span>tasks</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">else</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚ùå Batch exceeds limits</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üí∞ Per-claim max: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">maxPerClaim</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üí∞ Total remaining: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">remaining</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></pre>
<h3>Example 3: Execute Claim After Checking Allowance</h3>
<pre><pre class="!mt-0 !mb-0 !bg-transparent !p-0"><code class="language-javascript" style="white-space:pre;color:#9cdcfe;font-size:13px;text-shadow:none;font-family:Menlo, Monaco, Consolas, &quot;Andale Mono&quot;, &quot;Ubuntu Mono&quot;, &quot;Courier New&quot;, monospace;direction:ltr;text-align:left;word-spacing:normal;word-break:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none"><span class="token" style="color:#6a9955">// Check allowance and execute claim in one flow</span><span>
</span><span></span><span class="token" style="color:#569CD6">const</span><span> allowance </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">checkAllowance</span><span class="token" style="color:#d4d4d4">(</span><span>agentWallet</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#569CD6">const</span><span> claimAmount </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#b5cea8">10</span><span class="token" style="color:#d4d4d4">;</span><span>  </span><span class="token" style="color:#6a9955">// 10 USDC</span><span>
</span>
<span></span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span>allowance</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">remaining</span><span> </span><span class="token" style="color:#d4d4d4">&gt;=</span><span> claimAmount </span><span class="token" style="color:#d4d4d4">&amp;&amp;</span><span> claimAmount </span><span class="token" style="color:#d4d4d4">&lt;=</span><span> allowance</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">maxPerClaim</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#6a9955">// Get policy details from allowance response (use first active policy)</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> policy </span><span class="token" style="color:#d4d4d4">=</span><span> allowance</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">policies</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">find</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#9cdcfe">p</span><span> </span><span class="token" style="color:#569CD6">=&gt;</span><span> p</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">status</span><span> </span><span class="token" style="color:#d4d4d4">===</span><span> </span><span class="token" style="color:#ce9178">&quot;active&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>  
<span>  </span><span class="token" style="color:#c586c0">if</span><span> </span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#d4d4d4">!</span><span>policy</span><span class="token" style="color:#d4d4d4">)</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>    </span><span class="token" style="color:#c586c0">throw</span><span> </span><span class="token" style="color:#569CD6">new</span><span> </span><span class="token" style="color:#4ec9b0">Error</span><span class="token" style="color:#d4d4d4">(</span><span class="token" style="color:#ce9178">&quot;No active pay-as-you-go policy found&quot;</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#d4d4d4">}</span><span>
</span>
<span>  </span><span class="token" style="color:#6a9955">// Execute a claim</span><span>
</span><span>  </span><span class="token" style="color:#569CD6">const</span><span> signature </span><span class="token" style="color:#d4d4d4">=</span><span> </span><span class="token" style="color:#c586c0">await</span><span> </span><span class="token" style="color:#dcdcaa">executeClaim</span><span class="token" style="color:#d4d4d4">(</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">[</span><span class="token" style="color:#b5cea8">1</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#b5cea8">2</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#b5cea8">3</span><span class="token" style="color:#d4d4d4">,</span><span class="token spread" style="color:#d4d4d4">...</span><span class="token" style="color:#d4d4d4">,</span><span class="token" style="color:#b5cea8">64</span><span class="token" style="color:#d4d4d4">]</span><span class="token" style="color:#d4d4d4">,</span><span>                                  </span><span class="token" style="color:#6a9955">// agent wallet private key array</span><span>
</span><span>    policy</span><span class="token" style="color:#d4d4d4">.</span><span class="token property-access">id</span><span class="token" style="color:#d4d4d4">,</span><span>                                       </span><span class="token" style="color:#6a9955">// policy PDA address</span><span>
</span><span>    claimAmount </span><span class="token" style="color:#d4d4d4">*</span><span> </span><span class="token" style="color:#b5cea8">1000000</span><span class="token" style="color:#d4d4d4">,</span><span>                           </span><span class="token" style="color:#6a9955">// convert to smallest units (6 decimals)</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;RECIPIENT_PUBLIC_KEY_HERE&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>                     </span><span class="token" style="color:#6a9955">// where to send funds</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v&quot;</span><span class="token" style="color:#d4d4d4">,</span><span>  </span><span class="token" style="color:#6a9955">// USDC mint</span><span>
</span><span>    </span><span class="token" style="color:#ce9178">&quot;CwNybLVQ3sVmcZ3Q1veS6x99gUZcAF2duNDe3qbcEMGr&quot;</span><span>   </span><span class="token" style="color:#6a9955">// gateway</span><span>
</span><span>    </span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span>
<span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚úÖ Claim successful: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">signature</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üí∞ Amount: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">claimAmount</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> USDC</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üîÑ Remaining budget: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">remaining</span><span class="token template-string" style="color:#9cdcfe"> </span><span class="token template-string" style="color:#d4d4d4">-</span><span class="token template-string" style="color:#9cdcfe"> claimAmount</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> USDC</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span><span> </span><span class="token" style="color:#c586c0">else</span><span> </span><span class="token" style="color:#d4d4d4">{</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">‚ùå Insufficient allowance for </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">claimAmount</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178"> USDC</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span>  </span><span class="token" style="color:#4ec9b0">console</span><span class="token" style="color:#d4d4d4">.</span><span class="token method property-access" style="color:#dcdcaa">log</span><span class="token" style="color:#d4d4d4">(</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token template-string" style="color:#ce9178">üí∞ Have: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">allowance</span><span class="token template-string" style="color:#d4d4d4">.</span><span class="token template-string property-access" style="color:#9cdcfe">remaining</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string" style="color:#ce9178">, Need: </span><span class="token template-string" style="color:#569cd6">${</span><span class="token template-string" style="color:#9cdcfe">claimAmount</span><span class="token template-string" style="color:#569cd6">}</span><span class="token template-string template-punctuation" style="color:#ce9178">`</span><span class="token" style="color:#d4d4d4">)</span><span class="token" style="color:#d4d4d4">;</span><span>
</span><span></span><span class="token" style="color:#d4d4d4">}</span></code></pre></pre></div><button class="w-full px-4 py-3 rounded-lg text-sm font-medium transition-colors bg-white/10 hover:bg-white/20 text-white">Copy skill to clipboard</button></div><div class="grid grid-cols-2 gap-4"><div class="bg-accent/10 rounded-lg p-4 border border-accent/20"><h3 class="text-lg font-semibold text-white mb-2">‚úÖ Self-Contained</h3><p class="text-sm text-gray-300">No external dependencies or imports. Everything you need is in this one file.</p></div><div class="bg-accent/10 rounded-lg p-4 border border-accent/20"><h3 class="text-lg font-semibold text-white mb-2">ü§ñ Agent-Ready</h3><p class="text-sm text-gray-300">OpenClow-compatible skill designed for AI agents to check allowances autonomously.</p></div><div class="bg-accent/10 rounded-lg p-4 border border-accent/20"><h3 class="text-lg font-semibold text-white mb-2">üìä Budget Tracking</h3><p class="text-sm text-gray-300">Functions to check remaining budget, max per claim, and period end date.</p></div><div class="bg-accent/10 rounded-lg p-4 border border-accent/20"><h3 class="text-lg font-semibold text-white mb-2">üîÑ On-Demand Claims</h3><p class="text-sm text-gray-300">Agents claim funds when needed, respecting human-set budget limits.</p></div></div><div class="mt-6 pt-6 border-t border-white/10"><p class="text-sm text-gray-400 mb-2"><strong>Installation:</strong> Save file as<!-- --> <code class="bg-white/10 px-1.5 py-0.5 rounded text-white font-mono">SKILL.md</code> <!-- -->in your OpenClow skills directory.</p><p class="text-sm text-gray-400"><strong>Documentation:</strong> Full usage guide included in the skill file.</p></div></div></div><footer class="bg-primary-dark border-t border-accent/10"><div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8"><div class="py-16"><div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-8"><div class="lg:col-span-4"><div style="opacity:0;transform:translateY(20px)"><div class="flex items-center gap-3 mb-6"><div class="flex items-center justify-center w-10 h-10 rounded-xl bg-accent/10 border border-accent/20"><svg class="w-6 h-6 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><span class="font-display text-xl font-semibold text-white">Allowly</span></div><p class="text-muted mb-6 leading-relaxed">Pocket money, the web3 way. Set up automated USDC allowances for your kids in seconds using Tributary protocol.</p><div class="flex items-center gap-2 text-sm"><span class="text-muted">Powered by</span><a href="https://tributary.so" target="_blank" rel="noopener noreferrer" class="text-accent hover:text-accent-light font-medium transition-colors">Tributary</a><span class="text-muted">‚Ä¢</span><span class="text-muted">Non-custodial</span></div><div class="flex items-center gap-4 mt-8"><a href="https://x.com/tributaryso" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-10 h-10 rounded-lg glass text-muted hover:text-white hover:bg-accent/10 transition-all duration-300" tabindex="0"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"></path></svg></a><a href="https://t.me/tributaryso" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-10 h-10 rounded-lg glass text-muted hover:text-white hover:bg-accent/10 transition-all duration-300" tabindex="0"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm5.562 8.161c-.18 1.897-.962 6.502-1.359 8.627-.168.9-.5 1.201-.82 1.23-.696.064-1.225-.46-1.901-.903-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"></path></svg></a><a href="https://github.com/xeroc/allowly" target="_blank" rel="noopener noreferrer" class="flex items-center justify-center w-10 h-10 rounded-lg glass text-muted hover:text-white hover:bg-accent/10 transition-all duration-300" tabindex="0"><svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0C5.374 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"></path></svg></a></div></div></div><div class="lg:col-span-8"><div class="grid grid-cols-2 sm:grid-cols-3 gap-8"><div style="opacity:0;transform:translateY(20px)"><h3 class="text-sm font-semibold text-white mb-4">Product</h3><ul class="space-y-3"><li><a href="#how-it-works" class="text-sm text-muted hover:text-white transition-colors">How It Works</a></li><li><a href="#get-started" class="text-sm text-muted hover:text-white transition-colors">Get Started</a></li><li><a href="#features" class="text-sm text-muted hover:text-white transition-colors">Features</a></li></ul></div><div style="opacity:0;transform:translateY(20px)"><h3 class="text-sm font-semibold text-white mb-4">Resources</h3><ul class="space-y-3"><li><a href="https://docs.tributary.so" target="_blank" rel="noopener noreferrer" class="text-sm text-muted hover:text-white transition-colors flex items-center gap-1">Documentation<svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a></li><li><a href="https://actioncode.app" target="_blank" rel="noopener noreferrer" class="text-sm text-muted hover:text-white transition-colors flex items-center gap-1">Action Codes<svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a></li><li><a href="https://solanacookbook.com" target="_blank" rel="noopener noreferrer" class="text-sm text-muted hover:text-white transition-colors flex items-center gap-1">Solana Cookbook<svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a></li></ul></div><div style="opacity:0;transform:translateY(20px)"><h3 class="text-sm font-semibold text-white mb-4">Community</h3><ul class="space-y-3"><li><a href="https://t.me/tributaryso" target="_blank" rel="noopener noreferrer" class="text-sm text-muted hover:text-white transition-colors flex items-center gap-1">Telegram<svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a></li><li><a href="https://github.com/xeroc/allowly" target="_blank" rel="noopener noreferrer" class="text-sm text-muted hover:text-white transition-colors flex items-center gap-1">GitHub<svg class="w-3 h-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg></a></li></ul></div></div></div></div><div class="mt-16 pt-8 border-t border-accent/10 flex flex-col sm:flex-row items-center justify-between gap-4" style="opacity:0"><p class="text-sm text-muted">¬© <!-- -->2026<!-- --> Allowly. Built with üíó on Solana</p><div class="flex items-center gap-6 text-sm text-muted"><span class="flex items-center gap-2"><svg class="w-4 h-4 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path></svg>Non-custodial</span><span class="flex items-center gap-2"><svg class="w-4 h-4 text-accent" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"></path></svg>1% Protocol Fee</span></div></div></div></div></footer></div><!--$--><!--/$--><script src="/_next/static/chunks/webpack-965c07b068eecb24.js" id="_R_" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:\"$Sreact.fragment\"\n2:I[33048,[\"551\",\"static/chunks/e8979000-6f67640ba7c52e55.js\",\"819\",\"static/chunks/819-5ca4f0c952b26cc2.js\",\"859\",\"static/chunks/859-13c35d2bc51c08bf.js\",\"973\",\"static/chunks/973-bc29ef3a7e5acbc2.js\",\"177\",\"static/chunks/app/layout-1169a5c4ffb37414.js\"],\"SolanaWalletProvider\"]\n3:I[91027,[],\"\"]\n4:I[7919,[],\"\"]\n5:I[59800,[\"551\",\"static/chunks/e8979000-6f67640ba7c52e55.js\",\"819\",\"static/chunks/819-5ca4f0c952b26cc2.js\",\"859\",\"static/chunks/859-13c35d2bc51c08bf.js\",\"973\",\"static/chunks/973-bc29ef3a7e5acbc2.js\",\"177\",\"static/chunks/app/layout-1169a5c4ffb37414.js\"],\"\"]\n6:I[89342,[],\"ClientPageRoot\"]\n7:I[69814,[\"551\",\"static/chunks/e8979000-6f67640ba7c52e55.js\",\"631\",\"static/chunks/522d4f41-12549511b0e3335c.js\",\"6\",\"static/chunks/fe3fafec-9cfa794cae48736c.js\",\"819\",\"static/chunks/819-5ca4f0c952b26cc2.js\",\"67\",\"static/chunks/67-ebd51ca46df8dc38.js\",\"322\",\"static/chunks/322-f78ba1aea791da64.js\",\"770\",\"static/chunks/770-4d5fc768eb25254b.js\",\"850\",\"static/chunks/850-818bd3525f4465db.js\",\"321\",\"static/chunks/321-bbf7079f9105eb07.js\",\"652\",\"static/chunks/app/agent/page-a1bdc4a1a960a024.js\"],\"default\"]\na:I[25530,[],\"OutletBoundary\"]\nc:I[41775,[],\"AsyncMetadataOutlet\"]\ne:I[25530,[],\"ViewportBoundary\"]\n10:I[25530,[],\"MetadataBoundary\"]\n11:\"$Sreact.suspense\"\n13:I[96409,[],\"\"]\n:HL[\"/_next/static/css/d0d0b4cef903c133.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"0:{\"P\":null,\"b\":\"7PwqU0UHtc19JvAFkESE5\",\"p\":\"\",\"c\":[\"\",\"agent\"],\"i\":false,\"f\":[[[\"\",{\"children\":[\"agent\",{\"children\":[\"__PAGE__\",{}]}]},\"$undefined\",\"$undefined\",true],[\"\",[\"$\",\"$1\",\"c\",{\"children\":[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/d0d0b4cef903c133.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\",\"nonce\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"antialiased\",\"children\":[[\"$\",\"$L2\",null,{\"children\":[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":404}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],[]],\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]}],[\"$\",\"$L5\",null,{\"defer\":true,\"data-domain\":\"allowly.app\",\"src\":\"https://p.chainsquad.com/js/script.js\"}]]}]}]]}],{\"children\":[\"agent\",[\"$\",\"$1\",\"c\",{\"children\":[null,[\"$\",\"$L3\",null,{\"parallelRouterKey\":\"children\",\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L4\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"forbidden\":\"$undefined\",\"unauthorized\":\"$undefined\"}]]}],{\"children\":[\"__PAGE__\",[\"$\",\"$1\",\"c\",{\"children\":[[\"$\",\"$L6\",null,{\"Component\":\"$7\",\"searchParams\":{},\"params\":{},\"promises\":[\"$@8\",\"$@9\"]}],null,[\"$\",\"$La\",null,{\"children\":[\"$Lb\",[\"$\",\"$Lc\",null,{\"promise\":\"$@d\"}]]}]]}],{},null,false]},null,false]},null,false],[\"$\",\"$1\",\"h\",{\"children\":[null,[[\"$\",\"$Le\",null,{\"children\":\"$Lf\"}],null],[\"$\",\"$L10\",null,{\"children\":[\"$\",\"div\",null,{\"hidden\":true,\"children\":[\"$\",\"$11\",null,{\"fallback\":null,\"children\":\"$L12\"}]}]}]]}],false]],\"m\":\"$undefined\",\"G\":[\"$13\",[]],\"s\":false,\"S\":true}\n"])</script><script>self.__next_f.push([1,"8:{}\n9:\"$0:f:0:1:2:children:2:children:1:props:children:0:props:params\"\n"])</script><script>self.__next_f.push([1,"f:[[\"$\",\"meta\",\"0\",{\"charSet\":\"utf-8\"}],[\"$\",\"meta\",\"1\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}]]\nb:null\n"])</script><script>self.__next_f.push([1,"14:I[13615,[],\"IconMark\"]\n"])</script><script>self.__next_f.push([1,"d:{\"metadata\":[[\"$\",\"title\",\"0\",{\"children\":\"Allowly - Pocket Money the Web3 Way\"}],[\"$\",\"meta\",\"1\",{\"name\":\"description\",\"content\":\"Dead simple recurring allowances using Tributary. Parent wallet ‚Üí child wallet, automated. No infrastructure, no database, no jobs. Just a clean UI that creates Tributary policies and lets the protocol handle the rest.\"}],[\"$\",\"meta\",\"2\",{\"name\":\"author\",\"content\":\"Allowly\"}],[\"$\",\"link\",\"3\",{\"rel\":\"manifest\",\"href\":\"/site.webmanifest\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"meta\",\"4\",{\"name\":\"keywords\",\"content\":\"Allowly,pocket money,web3,Solana,Tributary,USDC,allowance,automated payments,recurring payments,crypto,blockchain,parent,child,wallet,subscription,DeFi\"}],[\"$\",\"meta\",\"5\",{\"name\":\"creator\",\"content\":\"Allowly\"}],[\"$\",\"meta\",\"6\",{\"name\":\"publisher\",\"content\":\"Allowly\"}],[\"$\",\"meta\",\"7\",{\"name\":\"robots\",\"content\":\"index, follow\"}],[\"$\",\"meta\",\"8\",{\"name\":\"googlebot\",\"content\":\"index, follow, max-video-preview:-1, max-image-preview:large, max-snippet:-1\"}],[\"$\",\"meta\",\"9\",{\"property\":\"og:title\",\"content\":\"Allowly - Pocket Money the Web3 Way\"}],[\"$\",\"meta\",\"10\",{\"property\":\"og:description\",\"content\":\"Dead simple recurring allowances using Tributary. Parent wallet ‚Üí child wallet, automated.\"}],[\"$\",\"meta\",\"11\",{\"property\":\"og:url\",\"content\":\"https://allowly.app\"}],[\"$\",\"meta\",\"12\",{\"property\":\"og:site_name\",\"content\":\"Allowly\"}],[\"$\",\"meta\",\"13\",{\"property\":\"og:locale\",\"content\":\"en_US\"}],[\"$\",\"meta\",\"14\",{\"property\":\"og:image\",\"content\":\"https://allowly.app/og-image.png\"}],[\"$\",\"meta\",\"15\",{\"property\":\"og:image:width\",\"content\":\"1200\"}],[\"$\",\"meta\",\"16\",{\"property\":\"og:image:height\",\"content\":\"630\"}],[\"$\",\"meta\",\"17\",{\"property\":\"og:image:alt\",\"content\":\"Allowly - Web3 Pocket Money\"}],[\"$\",\"meta\",\"18\",{\"property\":\"og:type\",\"content\":\"website\"}],[\"$\",\"meta\",\"19\",{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",\"20\",{\"name\":\"twitter:creator\",\"content\":\"@allowly\"}],[\"$\",\"meta\",\"21\",{\"name\":\"twitter:title\",\"content\":\"Allowly - Pocket Money the Web3 Way\"}],[\"$\",\"meta\",\"22\",{\"name\":\"twitter:description\",\"content\":\"Dead simple recurring allowances using Tributary. Parent wallet ‚Üí child wallet, automated.\"}],[\"$\",\"meta\",\"23\",{\"name\":\"twitter:image\",\"content\":\"https://allowly.app/og-image.png\"}],[\"$\",\"link\",\"24\",{\"rel\":\"shortcut icon\",\"href\":\"/favicon-16x16.png\"}],[\"$\",\"link\",\"25\",{\"rel\":\"icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",\"26\",{\"rel\":\"apple-touch-icon\",\"href\":\"/apple-touch-icon.png\"}],[\"$\",\"$L14\",\"27\",{}]],\"error\":null,\"digest\":\"$undefined\"}\n"])</script><script>self.__next_f.push([1,"12:\"$d:metadata\"\n"])</script></body></html>