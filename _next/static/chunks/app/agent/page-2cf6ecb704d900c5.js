(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[652],{32711:(n,e,a)=>{Promise.resolve().then(a.bind(a,69814))},69814:(n,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>m});var t=a(56946),l=a(13112),o=a(75829),i=a(50253),s=a(39925),c=a(67500),r=a(42778);let d='# Allowly Agent - Autonomous Pay-As-You-Go Allowances\n\n**Self-contained OpenClow skill for AI agents to check and manage USDC allowance budgets on Solana.**\n\n---\n\n## Overview\n\nCheck allowance availability and view pay-as-you-go policy details. Humans set up bounded allowance budgets, and you can check your available balance, view policy limits, and monitor claim history autonomously.\n\n## Use When\n\nYou need to:\n- Check how much USDC allowance is available\n- View pay-as-you-go policy details set by your human\n- Monitor claim history\n- Decide when to claim funds within per-claim limits\n\n## Quick Start\n\n```javascript\n// Check your allowance status\nconst status = await checkAllowance();\n\nconsole.log(`\uD83D\uDCB0 Total Budget: ${status.totalBudget}`);\nconsole.log(`✅ Remaining: ${status.remaining}`);\nconsole.log(`⚡ Max per claim: ${status.maxPerClaim}`);\n```\n\n---\n\n## API Functions\n\n### checkAllowance(agentWallet)\n\nCheck available allowance balance and policy details.\n\n```javascript\n/**\n * Check allowance status and policy details\n *\n * @param {string} agentWallet - Agent\'s wallet public key (base58)\n * @returns {Promise<object>} Allowance status with budget, paid, remaining, limits\n */\nasync function checkAllowance(agentWallet) {\n  // Validate inputs\n  if (!agentWallet || typeof agentWallet !== "string") {\n    throw new Error("Invalid agent wallet address");\n  }\n\n  // Initialize connection\n  const connection = new Connection("https://api.mainnet-beta.solana.com", {\n    commitment: "confirmed",\n  });\n\n  try {\n    // PRODUCTION IMPLEMENTATION:\n    // Fetch from blockchain using Tributary SDK\n    // 1. Fetch UserPayment account where recipient = agentWallet\n    // 2. Fetch PaymentPolicy accounts for that UserPayment\n    // 3. Identify pay-as-you-go policies (not subscriptions)\n    // 4. Aggregate totals and calculate remaining\n    // 5. Extract maxPerClaim and periodDays from policy\n\n    // MVP IMPLEMENTATION:\n    // Return mock data structure matching production\n\n    return {\n      totalBudget: 500,\n      totalPaid: 45,\n      remaining: 455,\n      maxPerClaim: 50,\n      periodDays: 30,\n      periodEnd: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n      policies: [\n        {\n          id: 1,\n          totalBudget: 500,\n          maxPerClaim: 50,\n          periodDays: 30,\n          remaining: 455,\n          periodEnd: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n          status: "active",\n        },\n      ],\n    };\n\n  } catch (error) {\n    console.error("Error checking allowance:", error.message);\n    throw new Error(`Failed to check allowance: ${error.message}`);\n  }\n}\n```\n\n**Returns:**\n```javascript\n{\n  totalBudget: 500,      // Total USDC budget for current period\n  totalPaid: 45,          // USDC already claimed in current period\n  remaining: 455,          // USDC available to claim\n  maxPerClaim: 50,        // Maximum USDC per single claim\n  periodDays: 30,         // Period length in days\n  periodEnd: "2026-03-12", // Date when budget resets\n  policies: [...]          // Array of policy details\n}\n```\n\n### viewPolicy(agentWallet, policyId)\n\nView details of a specific pay-as-you-go policy.\n\n```javascript\nasync function viewPolicy(agentWallet, policyId) {\n  const connection = new Connection("https://api.mainnet-beta.solana.com");\n\n  // PRODUCTION: Fetch from blockchain\n  // MVP: Return mock data\n\n  return {\n    id: policyId,\n    totalBudget: 500,\n    maxPerClaim: 50,\n    periodDays: 30,\n    remaining: 455,\n    periodEnd: new Date(Date.now() + 30 * 24 * 60 * 60 * 1000).toISOString(),\n    status: "active",\n  };\n}\n```\n\n### claimHistory(agentWallet, policyId)\n\nView claim/payment history for a policy.\n\n```javascript\nasync function claimHistory(agentWallet, policyId) {\n  const connection = new Connection("https://api.mainnet-beta.solana.com");\n\n  // PRODUCTION: Fetch payment transactions from blockchain\n  // Use Solana Explorer API or indexer (e.g., Helius)\n  // MVP: Return mock data\n\n  return [\n    {\n      timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(),\n      amount: 10,\n      txSignature: "3x..." + policyId,\n      memo: "API call: OpenAI",\n    },\n  ];\n}\n```\n\n---\n\n## Usage Examples\n\n### Example 1: Check Allowance Before Task\n\n```javascript\n// Task that requires payment\nconst task = {\n  requiresPayment: true,\n  cost: 10,  // USDC\n  description: "OpenAI GPT-4"\n};\n\n// Check allowance first\nconst allowance = await checkAllowance(agentWallet);\n\nif (allowance.remaining >= task.cost && task.cost <= allowance.maxPerClaim) {\n  console.log(`✅ Sufficient allowance: ${allowance.remaining}`);\n  console.log(`✅ Within per-claim limit: max ${allowance.maxPerClaim}`);\n  await executeTask(task);\n} else {\n  console.log(`❌ Insufficient allowance. Have ${allowance.remaining}, need ${task.cost}`);\n}\n```\n\n### Example 2: Smart Claim Sizing\n\n```javascript\nconst tasks = [\n  { name: "Send email", cost: 0.50 },\n  { name: "API call 1", cost: 2.00 },\n  { name: "API call 2", cost: 3.00 },\n];\n\nconst allowance = await checkAllowance(agentWallet);\nconst totalCost = tasks.reduce((sum, t) => sum + t.cost, 0);\n\n// Batch claim if within limits\nif (totalCost <= allowance.maxPerClaim && totalCost <= allowance.remaining) {\n  console.log(`✅ Batch claim: ${totalCost}`);\n  await executeAllTasks(tasks);\n}\n```\n\n---\n\n## Built for Allowly Agent - Autonomous Pay-As-You-Go Allowances\n';function m(){let[n,e]=(0,r.useState)(!1),a=async()=>{await navigator.clipboard.writeText(d),e(!0),setTimeout(()=>e(!1),2e3)};return(0,t.jsxs)("div",{className:"min-h-screen bg-primary-dark",children:[(0,t.jsx)(l.A,{mode:"agent"}),(0,t.jsx)(i.A,{mode:"agent"}),(0,t.jsx)(c.A,{mode:"agent"}),(0,t.jsx)(o.A,{}),(0,t.jsx)("div",{className:"max-w-4xl mx-auto py-16 px-4",children:(0,t.jsxs)("div",{className:"bg-white/5 backdrop-blur-sm rounded-2xl border border-white/10 p-8",children:[(0,t.jsxs)("h2",{className:"text-3xl font-bold text-white mb-4 flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-4xl",children:"\uD83E\uDD16"}),"Download Agent Skill"]}),(0,t.jsx)("p",{className:"text-gray-300 mb-6",children:"Copy this self-contained OpenClow skill file to give your AI agent the ability to check allowance and manage budgets autonomously."}),(0,t.jsxs)("div",{className:"bg-black/30 rounded-lg border border-white/10 p-4 mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-400 font-mono",children:"SKILL.md - Self-contained"}),(0,t.jsx)("button",{onClick:()=>{let n=new Blob([d],{type:"text/markdown"}),e=URL.createObjectURL(n),a=document.createElement("a");a.href=e,a.download="allowly-agent-skill.md",document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(e)},className:"px-4 py-2 bg-accent hover:bg-accent/80 text-white rounded-lg text-sm font-medium transition-colors",children:"Download File"})]}),(0,t.jsx)("pre",{className:"bg-black/50 rounded-lg p-4 overflow-x-auto text-sm",children:(0,t.jsxs)("code",{className:"text-gray-300",children:[d.substring(0,500),"..."]})}),(0,t.jsx)("button",{onClick:a,className:"w-full px-4 py-3 rounded-lg text-sm font-medium transition-colors ".concat(n?"bg-green-600 hover:bg-green-700 text-white":"bg-white/10 hover:bg-white/20 text-white"),children:n?"✅ Copied to clipboard!":"Copy skill to clipboard"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-accent/10 rounded-lg p-4 border border-accent/20",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"✅ Self-Contained"}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:"No external dependencies or imports. Everything you need is in this one file."})]}),(0,t.jsxs)("div",{className:"bg-accent/10 rounded-lg p-4 border border-accent/20",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"\uD83E\uDD16 Agent-Ready"}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:"OpenClow-compatible skill designed for AI agents to check allowances autonomously."})]}),(0,t.jsxs)("div",{className:"bg-accent/10 rounded-lg p-4 border border-accent/20",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"\uD83D\uDCCA Budget Tracking"}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:"Functions to check remaining budget, max per claim, and period end date."})]}),(0,t.jsxs)("div",{className:"bg-accent/10 rounded-lg p-4 border border-accent/20",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white mb-2",children:"\uD83D\uDD04 On-Demand Claims"}),(0,t.jsx)("p",{className:"text-sm text-gray-300",children:"Agents claim funds when needed, respecting human-set budget limits."})]})]}),(0,t.jsxs)("div",{className:"mt-6 pt-6 border-t border-white/10",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:[(0,t.jsx)("strong",{children:"Installation:"})," Save file as"," ",(0,t.jsx)("code",{className:"bg-white/10 px-1.5 py-0.5 rounded text-white font-mono",children:"SKILL.md"})," ","in your OpenClow skills directory."]}),(0,t.jsxs)("p",{className:"text-sm text-gray-400",children:[(0,t.jsx)("strong",{children:"Documentation:"})," Full usage guide included in the skill file."]})]})]})}),(0,t.jsx)(s.A,{})]})}}},n=>{n.O(0,[551,631,6,819,67,322,850,321,881,984,358],()=>n(n.s=32711)),_N_E=n.O()}]);